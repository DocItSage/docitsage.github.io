## Обзор

JSON – легковесный текстовый формат представления данных в виде ключ-значение, который используется для обмена данными.

Ключи в объектах JSON всегда являются строками, а значения могут быть следующих типов:

- строка
- число
- объект (объект JSON)
- массив
- boolean
- null

Значения JSON не могут быть следующих типов:

- функция
- дата
- undefined


**Вопрос**: Как же быть, если мы хотим передавать дату?
<br/>**Ответ**: В виде строки. Наиболее распространенным и общепринятым является формат [ISO 8601](https://ru.wikipedia.org/wiki/ISO_8601):
```"2024-04-13T08:30:00Z"```

## Безопасность

### Предотвращение атак
Основой безопасного использования JSON являются [санитизация](#_4), [экранирование](#_5) и [валидация данных](#_6). Эти инструменты универсальны и эффективны против всех описанных выше видов атак.

#### Санитизация данных

Санитизация данных — это процесс очистки данных от вредоносных или нежелательных элементов. В контексте веб-разработки это обычно включает удаление или замену символов, которые могут быть использованы для проведения атак, таких как вставка SQL, XSS или JSON Injection. 

Отсеивать “опасные символы” нет смысла, потому что некоторые символы опасны в одном контексте и совершенно безопасны в другом.

С санитизацией есть проблема: удаление символов может приводить к искажениям. Например ```Виталий & Татьяна``` превратится в ```Виталий Татьяна```.

Решением может стать экранирование.

#### Экранирование

Процесс замены специальных или управляющих символов внутри строки на их эквиваленты с помощью обратной косой черты (\\), например, \\" для кавычек или \\\\n для переноса строки. Это гарантирует, что эти символы не будут неправильно интерпретированы парсером JSON, обеспечивая корректность и безопасность данных JSON. 


#### Валидация данных

Валидация — процесс проверки данных на соответствие определенным критериям или правилам. В контексте JSON валидация обычно включает в себя проверку следующего:

- Соответствие структуры и типов данных предполагаемым. Например, если ожидается объект с определенными полями, валидация должна убедиться, что все эти поля присутствуют и имеют правильные типы данных.
- Отсутствие нежелательных символов или паттернов, которые могут вызвать проблемы при обработке данных (например, вредоносный код).
- Соответствие данных бизнес-правилам. Например, валидация может включать проверку того, что значение определенного поля находится в допустимом диапазоне.

## Пример

<div class="grid cards" markdown>

-   Пример JSON

    ---

    ```json
    @startjson
    {
    "null": null,
    "true": true,
    "false": false,
    "JSON_Number": [-1, -1.1, "<color:green>TBC"],
    "JSON_String": "a\nb\rc\td <color:green>TBC...",
    "JSON_Object": {
      "{}": {},
      "k_int": 123,
      "k_str": "abc",
      "k_obj": {"k": "v"}
    },
    "JSON_Array" : [
      [],
      [true, false],
      [-1, 1],
      ["a", "b", "c"],
      ["mix", null, true, 1, {"k": "v"}]
    ]
    }
    @endjson
    ```

-   Визуализация в PlantUml

    ---

    ```puml
    @startjson
    {
    "null": null,
    "true": true,
    "false": false,
    "JSON_Number": [-1, -1.1, "<color:green>TBC"],
    "JSON_String": "a\nb\rc\td <color:green>TBC...",
    "JSON_Object": {
      "{}": {},
      "k_int": 123,
      "k_str": "abc",
      "k_obj": {"k": "v"}
    },
    "JSON_Array" : [
      [],
      [true, false],
      [-1, 1],
      ["a", "b", "c"],
      ["mix", null, true, 1, {"k": "v"}]
    ]
    }
    @endjson
    ```
</div>

*[JSON]: JavaScript Object Notation